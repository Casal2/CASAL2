\section{Model overview\label{sec:overview}}\index{Model overview}

\subsection{Introduction}

\CNAME\ is a generalized age-structured population dynamics modelling framework. It implements statistical catch-at-age population dynamics using a discrete time-step state-space model that represents a cohort-based population age structure. \index{Model ! About \CNAME}\index{About \CNAME} 

\CNAME\ is run from the console window on Microsoft Windows or from a terminal window on Linux. \CNAME\ reads in information from input data files, the main one of which is the \emph{\config}. Commands and subcommands in the \config\ define the model structure, provide observations, define parameters, and define the outputs (reports) for \CNAME. Command line options and argument set the run mode and where to direct the output. See Section~\ref{sec:running} for details.

The model is defined in terms of the \emph{state}\index{Model ! state}\index{State}. The state consists of two parts, the \emph{partition}\index{Model ! partition}\index{Partition}, and any \emph{derived quantities}\index{Model ! derived quantities}\index{Derived quantities}. The state will typically change in each \emph{time-step}\index{Model ! time-steps}\index{time-steps} of every year, depending on the \emph{processes}\index{Model ! processes}\index{Processes} defined for those time-steps in the model. 

The \emph{partition} is a representation of the population at an point in time, and can be considered a matrix of the numbers of individuals within each category and at each age. 

A \emph{derived quantity} is a summary of the abundance or biomass of a selected part of the partition at some point in time. Unlike the partition, which is updated as each new process is applied, a derived quantity records a single value for each year of the model run. Hence, derived quantities build up a vector of values over the time period represented by the model. For example, the total biomass of individuals in categories labelled, say, 'mature' at some point in the annual cycle may be a derived quantity. The derived quantity is then available as an \emph{addressable parameter} to the model, to be reported, or to be an input into another process (e.g., the stock-recruitment relationship) at some point in the model in a subsequent year. 

The state at some point in time is the term for the combination of the partition and any derived quantities at that point in time. Throughout the modelled years, changes to the state occur from the application of \emph{processes}. This state then provides the basis for the generation of expected values for \emph{observations}, as well as for reports and other outputs.

Running of the model consists of two steps: first, the model state is initialised for a number of iterations (years), then the model runs over a range of predefined years. 

Initialisation can be in one or more phases, and for each phase, the processes that occur in each year, and the order in which they are applied, need to be defined. The processes that occur is controlled by the \emph{annual cycle}\index{Model ! annual cycle}\index{Annual cycle}. This configuration defines what processes happen in each model year and in what sequence. Furthermore, the processes in each year are split up into one or more time-steps (with at least one process occurring in each time-step). Each time-step can be conceptualised as representing a particular period of the calendar year, or they can be an abstract sequence of events.

The division of the year into an arbitrary number of time-steps allows the user to specify the exact order in which processes occur, and how/when observations are evaluated. The user specifies the time-steps, their order, and the processes within each time-step. If more than one process occurs in a time-step, then the processes are applied in the order that they are specified. 

Observations are always linked to a specific time-step, and are evaluated by the model in that time-step. Hence, time-steps can be used to break processes into groups, and assist in defining the timing of the observations within the annual cycle. The manner in which observations are evaluated and how the expected values are calculated by the model is described in Section \ref{sec:observation-section}.

The population structure of \CNAME\ follows the usual population modelling conventions and is similar to those implemented in CASAL\index{CASAL} \citep{1388}. The model records the numbers of individuals by category and age (e.g., numbers of males and females at age). In general, cohorts are added via a recruitment event, are aged annually, and are removed from the population via various forms of mortality. The population is assumed to be closed (i.e., no immigration or emigration from the modelled area).

A model is implemented in \CNAME\ using an \config \index{Input configuration file}, which provides a complete description of the model configuration (i.e., the population structure, the initialisation assumptions, and the subsequent population processes), the observations, the estimation methods, and the reports (outputs). \CNAME\ runs from a console window on \I{Microsoft Windows} or from a terminal on \I{Linux}. A model can be either \emph{run}, estimable parameters can be \emph{estimated} or \emph{profiled}, \emph{MCMC} samples can be generated, and parameter estimates can be \emph{projected} or used by \CNAME\ as parameters of an operating model to \emph{simulate} observations.

A model in \CNAME\ is specified by an \config, comprising four main sections. These are: the population section\index{Population section} that defines the model structure, population dynamics, etc.; the estimation section\index{Estimation section} that defines the methods of estimation (minimisation methods or MCMC algorithms) and the model parameters to be estimated; the observation section\index{Observation section} that defines the observation data and their associated likelihoods; and the report section\index{Report section} that defines the outputs and reports from the model and where these are saved. The \config\ completely describes a model implemented in \CNAME. See Sections \ref{sec:population-syntax}, \ref{sec:estimation-syntax}, \ref{sec:observation-syntax}, and \ref{sec:report-syntax} for details and specification of \CNAME's command and subcommand syntax within the \config. 

\subsection{\I{The population section}}

The population section\index{Population section} (Section \ref{sec:population-section}) defines the model of the population dynamics. It describes the population structure, the initialisation method and phases, the run and projection years (model period), population processes (for example, recruitment, migration, and mortality), selectivities, and key population parameters.

\subsection{\I{The estimation section}}

The estimation section\index{Estimation section} (Section \ref{sec:estimation-section}) specifies the parameters to be estimated\index{Estimated parameters}, estimation methods, the penalties to be applied, and the priors. Estimation is based on an objective function (e.g., negative log posterior). Depending on the run mode, the estimation section is used to specify the methods for finding a point estimate (i.e., the set of parameter values that minimises the objective function), doing likelihood profiles, MCMC methods and options, etc.

The estimation section specifies the parameters to be estimated within each model run and the estimation methods. The estimation section specifies the choice of estimation method, which model parameters are to be estimated, their priors, their starting values, and minimiser control values.

Penalties and priors act as constraints on the estimation. They can either "encourage" or "discourage" (depending on the specific implementation) parameter estimates that are 'near' some value, and hence influence the estimation process. For example, a penalty can be included in the objective function to discourage parameter estimates that lead to models where the recorded catch was unable to be fully taken.

\subsection{\I{The observation section}}

The types of observations, their values, and their associated error structures are defined in the observation section (Section \ref{sec:observation-section}). Observations are data which allow for making inferences about unknown parameters. The observation section\index{Observation section} specifies the observations, their errors, likelihoods, and when the observations occur. Examples include relative or absolute abundance indices, proportions-at-age, and tag recapture observations. Estimation generates values for each of the estimated parameters that are the best fit to the data, i.e., where each expected value is 'close' (in some mathematical sense) to the corresponding observed value. 

\subsection{\I{The report section}}

The report section\index{Report section} (Section \ref{sec:report-section}) specifies the model outputs. It defines the quantities and model summaries to be output to external files or to the standard output. While \CNAME\ will output helpful and informative messages generated from the source code as the application runs, \CNAME\ will produce model estimates, population states, and other data only as configured in the report section. There are no default reports produced.  If no reports are specified, then no output will be produced.
