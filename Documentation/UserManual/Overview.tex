\section{Model overview\label{sec:Overview}}\index{Model overview}

\CNAME\ is a generalised age- or length-structured population dynamics modelling framework for undertaking age- or length-structured integrated assessments \citep{Maunder_2013}. \CNAME\ allows for multiple sources of information to be combined into a single analysis using a statistical framework so that error sources are fully propagated into the uncertainty in the outcomes. The model follows cohorts as numbers-at-age (or numbers-at-length for length-structure models) through time, recording the changes that occur from the population dynamic processes.\index{Model ! About \CNAME}\index{About \CNAME}

\CNAME\ is run from the console window on Microsoft Windows or from a terminal window on Linux. \CNAME\ has two sources of information: the \emph{\config} which  define the model structure, provides observations, defines active parameters, and specifies outputs (reports); and the run-time mode (e.g., estimate active parameters, run projections, etc..) that is given by command line options and arguments (see Section \ref{sec:RunningCasal2} for specific details). Typically a 'run' will simply run the model (without estimation) and generate the expected values and other models outputs from the parameter values assumed, and an estimation will minimise the model objective function to derive the 'best fit' parameters.

A \CNAME\ model is defined by its initial conditions and the processes that occur within and to the population over the years of the model run. The annual cycle defines the time steps that occur within each year and the order of processes within each time step. At each point in time, the model updates the \emph{state}\index{Model ! state}\index{State} of the model, where the state consists of two parts, the \emph{partition}\index{Model ! partition}\index{Partition}, and any \emph{derived quantities}\index{Model ! derived quantities}\index{Derived quantities} requested.

The \emph{partition} is a representation of the population at each time step, and can be considered a matrix of the numbers of individuals within each category (i.e., row) and at each age (i.e., column). The partition will change after each process\index{Model ! processes}\index{Processes}, and hence after each \emph{time-step}\index{Model ! time-steps}\index{time-steps} of every year. The rows of the partition (categories) and columns \ifAgeBased(ages)\else(lengths)\fi \ define the population structure. For example, categories can define males and females, area, and/or maturity stage. Note that any user-defined category or category label is possible, for example species, stock, tagged status. The number of categories, what they represent, and how they interact is completely defined by the user. The model records the numbers of individuals within each category and \ifAgeBased age\else length\fi \  (e.g., for model with a two sexes, the numbers of males and females at \ifAgeBased age\else length\fi ). In general, cohorts are added via a recruitment event, are aged annually, and are removed from the population via various forms of mortality (e.g., fishing or natural mortality).

A \emph{derived quantity} is a value that is calculated for the partition at some point in time. An example of a derived quantity is spawning stock biomass ($SSB$) -- the sum of the biomass of individuals that are mature (or spawning) at some specific point in the annual cycle. Unlike the partition, which is updated in each time step, a derived quantity calculates a single value for each year of the model run. Hence, derived quantities are a vector of values over the time period represented by the model. Each derived quantity can be reported or used as an input into a process. The most commonly used derived quantity is spawning stock biomass ($SSB$) in the stock-recruitment relationship which determines recruitment of the population into the model. Another example might be a density dependent mortality process for a species that is based on the biomass of another species in the model.

Observations are the data that was observed for some aspect of the population. Each observation block includes the observed values, the sampling distribution, relationship with the partition, and the time within the model that these occur (time step and year). For example, indices of abundance or biomass from a research survey, or \ifAgeBased age\else length\fi \ compositions from a commercial catch in a fishery. The partition is queried to generate the expected values for the observations, and then the sampling distribution and sample sizes are used to calculate their likelihood. In broad terms, the model parameters are estimated to provide the best fit of the expected values to the observations, by minimising an objective function. Best fit is judged by the lowest objective function value, with the objective function equal to the sum of the negative log-likelihood values, the priors, and any model constraints (penalties). The evaluation of observations and the calculation of the expected values for each observation type is described in Section \ref{sec:Observation}.

The method that \CNAME\ uses to find a minimum, the parameters to estimate and their priors is given in the estimation section, Section \ref{sec:Estimation}. This includes the choice of minimiser, MCMC algorithms and associated parameters, as well as any transformations and penalties used to constrain the model.

Outputs (reports) are defined in the report section. \CNAME\ has a large number of reports to summarise or generate a variety of output for a given model. See Section \ref{sec:Report} for more information.

The model, its population structure, observations, methods of estimation, and output reports are all defined in the \config\. The run mode of \CNAME\ is determined by the command line arguments given when 'running' \CNAME.

The \config\ are text files with the \CNAME\ commands and subcommands. The \config\ completely describe a model implemented in \CNAME. See Sections \ref{syntax:Population}, \ref{syntax:Estimation}, \ref{syntax:Observations}, and \ref{syntax:Reports} for details of \CNAME's command and subcommand syntax.  The default name for the initial file is \texttt{config.csl2}, however any file name can be used if given as an argument to the command line when calling \CNAME. Generally, it can be useful to split the \config\ into a number of smaller files using the \texttt{@include} command or on the command line with the \texttt{-c} argument. We recommend using separate files for the different section for the configuration commands and subcommands to assist readability.
